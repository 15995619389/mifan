// Generated by CoffeeScript 1.7.1
Mifan.controller("homeNews", function($scope, $timeout, $http) {
  var API, comment, news;
  API = $scope.API;
  $scope.content = "";
  $scope.toggleMBubble = function(index) {
    return $scope.newsCollect[index].bblActv = !$scope.newsCollect[index].bblActv;
  };
  $scope.setMBill = function(index) {
    return $scope.toggleMBill(["love", "comment", "share"]);
  };
  $scope.newsCollect = [];
  news = {
    init: function() {
      $scope.$on("getHomeNews", function() {
        return news.get();
      });
      if ($scope.isLogin) {
        return news.get();
      }
    },
    get: function() {
      var cb, url;
      url = "" + API.news + $scope.privacyParamDir;
      if (IsDebug) {
        url = API.news;
      }
      cb = function(data) {
        var ret;
        ret = data['ret'];
        if (String(ret) === "100000") {
          return $scope.newsCollect = data['result'];
        }
      };
      return $http.get(url, {
        cache: "lruCache"
      }).success(cb);
    }
  };
  news.init();
  comment = {
    init: function() {
      return $scope.comment = this;
    },
    show: function($index) {
      var index, _i, _len, _ref;
      _ref = $scope.newsCollect;
      for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {
        news = _ref[index];
        news.cmtActive = $index === index ? true : false;
      }
      return console.log($scope.newsCollect);
    }
  };
  return comment.init();
});
